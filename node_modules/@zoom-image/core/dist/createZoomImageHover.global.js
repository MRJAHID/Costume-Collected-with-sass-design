var ZoomImage = (function (exports) {
	'use strict';

	var X=()=>{let e=new Set,r=a=>e.has(a);return {createZoomImage:({src:a,store:t,img:s})=>{s.src=a,!r(a)&&(e.add(a),t.setState({zoomedImgStatus:"loading"}),s.addEventListener("load",()=>{t.setState({zoomedImgStatus:"loaded"});}),s.addEventListener("error",()=>{t.setState({zoomedImgStatus:"error"});}));},checkImageLoaded:r}},b=X();function y(e){let r=new Set,c=!1,a=e,t,s=(o={})=>{t={...t,...o},m();},m=()=>{if(c)return;let o=!1;if(t){for(let n in t)if(a[n]!==t[n]){o=!0;break}}o&&(a={...a,...t},r.forEach(n=>n({state:a,updatedProperties:t})),t=void 0);};return {subscribe:o=>(r.add(o),()=>{r.delete(o);}),cleanup:()=>r.clear(),getState:()=>a,setState:s,batch:o=>{c=!0,o(),c=!1,m();}}}function x(e,r,c){return Math.max(r,Math.min(c,e))}function f(e){e.preventDefault();}var D=new Set(["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]);function K(e){if(D.has(e.key))return f(e),!1}var S;function E(){S=new AbortController;let{signal:e}=S;window.addEventListener("DOMMouseScroll",f,{signal:e}),window.addEventListener("wheel",f,{passive:!1,signal:e}),window.addEventListener("touchmove",f,{passive:!1,signal:e}),window.addEventListener("keydown",K,{signal:e});}function Z(){S?.abort();}function T(e){if(!e)throw new Error("Please specify a container for the zoom image");let r=e.querySelector("img");if(!r)throw new Error("Please place an image inside the container");return r}function N(e,r={}){let c=new AbortController,{signal:a}=c,t=T(e),s=document.createElement("div");s.style.overflow="hidden";let m=s.appendChild(document.createElement("img"));m.style.maxWidth="none";let o=e.appendChild(document.createElement("div")),n={zoomImageSource:r.zoomImageSource||t.src,zoomLensClass:r.zoomLensClass||"",customZoom:r.customZoom,scaleFactor:r.scaleFactor||1,zoomTarget:r.zoomTarget},u=y({zoomedImgStatus:b.checkImageLoaded(n.zoomImageSource)?"loaded":"idle",enabled:!0}),p,g,d;function w(i){let l=i.getBoundingClientRect();return {left:l.left,top:l.top}}function C(i){return t.width-i}function H(i){return t.height-i}function k(i){let l=o.clientWidth/2;return x(i,l,C(l))-l}function P(i){let l=o.clientHeight/2;return x(i,l,H(l))-l}function M(){if(n.customZoom){s.style.width=n.customZoom.width+"px",s.style.height=n.customZoom.height+"px";return}s.style.width=t.width+"px",s.style.height=t.height+"px";}function v(){if(M(),d=w(t),p=t.naturalWidth/t.width,g=t.naturalHeight/t.height,m.style.display="block",m.style.display="none",o.style.position="absolute",n.zoomLensClass||(o.style.background="rgba(238, 130, 238, 0.5)"),n.customZoom){o.style.width=n.customZoom.width/p*n.scaleFactor+"px",o.style.height=n.customZoom.height/g*n.scaleFactor+"px";return}o.style.width=t.clientWidth/p+"px",o.style.height=t.clientHeight/g+"px";}function F(){if(o.style.display="none",n.zoomLensClass&&o.classList.add(n.zoomLensClass),e.addEventListener("pointerdown",I,{signal:a}),e.addEventListener("pointermove",I,{signal:a}),e.addEventListener("pointerenter",R,{signal:a}),e.addEventListener("pointerleave",A,{signal:a}),window.addEventListener("scroll",O,{signal:a}),n.zoomTarget){n.zoomTarget.appendChild(s);return}e.appendChild(s),m.style.position="absolute",m.style.top="0px",m.style.right="0px",m.style.transform="translateX(100%)";}function I(i){let l,h,L,z;d&&(l=k(i.clientX-d.left),h=P(i.clientY-d.top),L=l*p/n.scaleFactor,z=h*g/n.scaleFactor,m.style.transform="translate("+-L+"px,"+-z+"px)",o.style.cssText+="transform:translate("+l+"px,"+h+"px); top: 0; left: 0;");}async function R(){b.createZoomImage({img:m,src:n.zoomImageSource,store:u}),E(),m.style.display="block",o.style.display="block";}function A(){Z(),m.style.display="none",o.style.display="none";}function O(){d=w(t);}return t.complete?v():t.onload=v,F(),{cleanup:()=>{if(c.abort(),e.removeChild(o),n.zoomTarget){n.zoomTarget.removeChild(s);return}e.removeChild(s);},subscribe:u.subscribe,getState:u.getState,setState:i=>{u.setState(i);}}}

	exports.createZoomImageHover = N;

	return exports;

})({});
//# sourceMappingURL=out.js.map
//# sourceMappingURL=createZoomImageHover.global.js.map