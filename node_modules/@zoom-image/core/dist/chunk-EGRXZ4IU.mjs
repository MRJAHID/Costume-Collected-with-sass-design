import { b } from './chunk-B6SF2NEL.mjs';
import { a } from './chunk-ZT5SJQQV.mjs';
import { d, b as b$1, c } from './chunk-2DUGZGRE.mjs';

function C(m,s={}){let a$1=d(m),t={zoomFactor:s.zoomFactor??4,zoomImageSource:s.zoomImageSource??a$1.src},n=a({zoomedImgStatus:b.checkImageLoaded(t.zoomImageSource)?"loaded":"idle"}),f=a$1.clientWidth*t.zoomFactor,S=a$1.clientHeight*t.zoomFactor,o=m.appendChild(document.createElement("img"));o.style.maxWidth="none",o.style.width=`${f}px`,o.style.height=`${S}px`,o.style.position="absolute",o.style.top="0",o.style.left="0";function v(e){o.style.display="block",b.createZoomImage({img:o,src:t.zoomImageSource,store:n}),l(e),b$1();}function y(e){l(e);}function b$2(){c(),o.style.display="none",o.style.transform="none";}let F=e=>{let r=m.clientWidth;return e>0?0:e+r*t.zoomFactor<r?-r*(t.zoomFactor-1):e},Z=e=>{let r=m.clientHeight;return e>0?0:e+r*t.zoomFactor<r?-r*(t.zoomFactor-1):e};function l(e){o.style.display="block",b.createZoomImage({img:o,src:t.zoomImageSource,store:n});let r=m.getBoundingClientRect(),u=e.clientX-r.left,d=e.clientY-r.top,E=F(-u*t.zoomFactor+u),x=Z(-d*t.zoomFactor+d);o.style.transform=`translate(${E}px, ${x}px)`;}let g=new AbortController,{signal:i}=g;return m.addEventListener("pointerenter",v,{signal:i}),m.addEventListener("pointermove",y,{signal:i}),m.addEventListener("pointerleave",b$2,{signal:i}),{cleanup:()=>{g.abort(),m.removeChild(o),n.cleanup();},subscribe:n.subscribe,getState:n.getState}}

export { C as a };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=chunk-EGRXZ4IU.mjs.map