import { b } from './chunk-B6SF2NEL.mjs';
import { a } from './chunk-ZT5SJQQV.mjs';
import { d, b as b$1, c, a as a$1 } from './chunk-2DUGZGRE.mjs';

function q(l,a$2={}){let y=new AbortController,{signal:i}=y,t=d(l),s=document.createElement("div");s.style.overflow="hidden";let r=s.appendChild(document.createElement("img"));r.style.maxWidth="none";let o=l.appendChild(document.createElement("div")),e={zoomImageSource:a$2.zoomImageSource||t.src,zoomLensClass:a$2.zoomLensClass||"",customZoom:a$2.customZoom,scaleFactor:a$2.scaleFactor||1,zoomTarget:a$2.zoomTarget},d$1=a({zoomedImgStatus:b.checkImageLoaded(e.zoomImageSource)?"loaded":"idle",enabled:!0}),u,g,c$1;function b$2(n){let m=n.getBoundingClientRect();return {left:m.left,top:m.top}}function C(n){return t.width-n}function E(n){return t.height-n}function w(n){let m=o.clientWidth/2;return a$1(n,m,C(m))-m}function H(n){let m=o.clientHeight/2;return a$1(n,m,E(m))-m}function k(){if(e.customZoom){s.style.width=e.customZoom.width+"px",s.style.height=e.customZoom.height+"px";return}s.style.width=t.width+"px",s.style.height=t.height+"px";}function z(){if(k(),c$1=b$2(t),u=t.naturalWidth/t.width,g=t.naturalHeight/t.height,r.style.display="block",r.style.display="none",o.style.position="absolute",e.zoomLensClass||(o.style.background="rgba(238, 130, 238, 0.5)"),e.customZoom){o.style.width=e.customZoom.width/u*e.scaleFactor+"px",o.style.height=e.customZoom.height/g*e.scaleFactor+"px";return}o.style.width=t.clientWidth/u+"px",o.style.height=t.clientHeight/g+"px";}function F(){if(o.style.display="none",e.zoomLensClass&&o.classList.add(e.zoomLensClass),l.addEventListener("pointerdown",I,{signal:i}),l.addEventListener("pointermove",I,{signal:i}),l.addEventListener("pointerenter",R,{signal:i}),l.addEventListener("pointerleave",O,{signal:i}),window.addEventListener("scroll",X,{signal:i}),e.zoomTarget){e.zoomTarget.appendChild(s);return}l.appendChild(s),r.style.position="absolute",r.style.top="0px",r.style.right="0px",r.style.transform="translateX(100%)";}function I(n){let m,p,S,x;c$1&&(m=w(n.clientX-c$1.left),p=H(n.clientY-c$1.top),S=m*u/e.scaleFactor,x=p*g/e.scaleFactor,r.style.transform="translate("+-S+"px,"+-x+"px)",o.style.cssText+="transform:translate("+m+"px,"+p+"px); top: 0; left: 0;");}async function R(){b.createZoomImage({img:r,src:e.zoomImageSource,store:d$1}),b$1(),r.style.display="block",o.style.display="block";}function O(){c(),r.style.display="none",o.style.display="none";}function X(){c$1=b$2(t);}return t.complete?z():t.onload=z,F(),{cleanup:()=>{if(y.abort(),l.removeChild(o),e.zoomTarget){e.zoomTarget.removeChild(s);return}l.removeChild(s);},subscribe:d$1.subscribe,getState:d$1.getState,setState:n=>{d$1.setState(n);}}}

export { q as a };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=chunk-4QA2BYZJ.mjs.map