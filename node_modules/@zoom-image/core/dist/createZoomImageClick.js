'use strict';

var k=()=>{let e=new Set,a=t=>e.has(t);return {createZoomImage:({src:t,store:o,img:m})=>{m.src=t,!a(t)&&(e.add(t),o.setState({zoomedImgStatus:"loading"}),m.addEventListener("load",()=>{o.setState({zoomedImgStatus:"loaded"});}),m.addEventListener("error",()=>{o.setState({zoomedImgStatus:"error"});}));},checkImageLoaded:a}},g=k();function p(e){let a=new Set,s=!1,t=e,o,m=(i={})=>{o={...o,...i},l();},l=()=>{if(s)return;let i=!1;if(o){for(let r in o)if(t[r]!==o[r]){i=!0;break}}i&&(t={...t,...o},a.forEach(r=>r({state:t,updatedProperties:o})),o=void 0);};return {subscribe:i=>(a.add(i),()=>{a.delete(i);}),cleanup:()=>a.clear(),getState:()=>t,setState:m,batch:i=>{s=!0,i(),s=!1,l();}}}function d(e){e.preventDefault();}var F=new Set(["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]);function Z(e){if(F.has(e.key))return d(e),!1}var f;function y(){f=new AbortController;let{signal:e}=f;window.addEventListener("DOMMouseScroll",d,{signal:e}),window.addEventListener("wheel",d,{passive:!1,signal:e}),window.addEventListener("touchmove",d,{passive:!1,signal:e}),window.addEventListener("keydown",Z,{signal:e});}function z(){f?.abort();}function v(e){if(!e)throw new Error("Please specify a container for the zoom image");let a=e.querySelector("img");if(!a)throw new Error("Please place an image inside the container");return a}function $(e,a={}){let s=v(e),t={zoomFactor:a.zoomFactor??4,zoomImageSource:a.zoomImageSource??s.src},o=!1,m=p({zoomedImgStatus:g.checkImageLoaded(t.zoomImageSource)?"loaded":"idle"}),l=s.clientWidth*t.zoomFactor,i=s.clientHeight*t.zoomFactor,r=e.appendChild(document.createElement("img"));r.style.maxWidth="none",r.style.width=`${l}px`,r.style.height=`${i}px`,r.style.position="absolute",r.style.top="0",r.style.left="0";function x(n){o&&S(n);}let w=n=>{let c=e.clientWidth;return n>0?0:n+c*t.zoomFactor<c?-c*(t.zoomFactor-1):n},E=n=>{let c=e.clientHeight;return n>0?0:n+c*t.zoomFactor<c?-c*(t.zoomFactor-1):n};function S(n){r.style.display="block",g.createZoomImage({img:r,src:t.zoomImageSource,store:m});let c=e.getBoundingClientRect(),h=n.clientX-c.left,I=n.clientY-c.top,L=w(-h*t.zoomFactor+h),P=E(-I*t.zoomFactor+I);r.style.transform=`translate(${L}px, ${P}px)`;}function C(n){if(o){o=!1,r.style.display="none";return}S(n),o=!0;}let b=new AbortController,{signal:u}=b;return e.addEventListener("pointerdown",C,{signal:u}),e.addEventListener("pointerenter",y,{signal:u}),e.addEventListener("pointerleave",z,{signal:u}),e.addEventListener("pointermove",x,{signal:u}),{cleanup:()=>{b.abort(),e.removeChild(r),m.cleanup();},subscribe:m.subscribe,getState:m.getState}}

exports.createZoomImageClick = $;
//# sourceMappingURL=out.js.map
//# sourceMappingURL=createZoomImageClick.js.map